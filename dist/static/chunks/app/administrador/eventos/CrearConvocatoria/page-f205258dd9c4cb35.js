(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7068],{5174:function(e,t,a){Promise.resolve().then(a.bind(a,3957))},3957:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return CrearConvocatoria}});var l=a(7437),s=a(2173),r=a(4033),n=a(2265);function CrearConvocatoria(){let[e,t]=(0,n.useState)([]),[a,i]=(0,n.useState)([]),[c,d]=(0,n.useState)(""),[o,u]=(0,n.useState)(""),[x,m]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[f,g]=(0,n.useState)(""),[j,N]=(0,n.useState)(""),[v,y]=(0,n.useState)(""),[b,w]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1),[C,E]=(0,n.useState)(""),[I,q]=(0,n.useState)([]),[D,O]=(0,n.useState)(!1),_="https://deportnortbox-api.ddns.net",P=(0,r.useRouter)(),getEntrenadores=async e=>{try{let t=await s.Z.get("".concat(_,"/users/List"),{headers:{sessiontoken:e},params:{role:"Entrenador"}});return t.data.users}catch(e){console.log(e)}},getUsuarios=async e=>{try{let t=await s.Z.get("".concat(_,"/users/List"),{headers:{sessiontoken:e}});return t.data.users}catch(e){console.log(e)}},cargaEntrenadores=async()=>{let e;let a=localStorage.getItem("userData");null!=a&&(e=JSON.parse(a).token);let l=await getEntrenadores(e);t(l)},cargarUsuarios=async()=>{let e;let t=localStorage.getItem("userData");null!=t&&(e=JSON.parse(t).token);let a=await getUsuarios(e);i(a)};function handlerCancelar(){let e,t;let a=localStorage.getItem("userData");null!=a&&(e=JSON.parse(a).role),t="Entrenador"==e?"entrenador":"administrador",P.push("/"+t+"/calendario")}function handlerSetParticipantes(e){let t=[...I],a=t.indexOf(C);e?-1!=a&&t.splice(a,1):-1==a&&t.push(C),q(t)}async function handlerSubmit(){let e,t,a;let l=localStorage.getItem("userData");null!=l&&(e=JSON.parse(l).token);let r={sessiontoken:e};null!=l&&(t=JSON.parse(l).role),a="Entrenador"==t?"entrenador":"administrador";try{await s.Z.post("".concat(_,"/event/meet"),{trainer:o,date:x,startsAt:h,endsAt:f,name:j,description:v,participants:I},{headers:r}),P.push("/"+a+"/calendario")}catch(e){console.log(e)}}return(0,n.useEffect)(()=>{cargaEntrenadores(),cargarUsuarios()},[]),(0,n.useEffect)(()=>{if(typeof h==typeof f){if(h.length>1){let e=h.split(":"),t=f.split(":");parseInt(e[0])>parseInt(t[0])?k(!0):parseInt(e[0])==parseInt(t[0])?parseInt(e[1])<parseInt(t[1])?k(!1):k(!0):k(!1)}}else k(!0)},[f,h]),(0,n.useEffect)(()=>{let e="";for(let t of I)e+=t+"\n";d(e)},[I]),(0,l.jsx)("div",{className:"container mx-auto mt-8",children:(0,l.jsx)("div",{className:"p-4 ",children:(0,l.jsxs)("form",{onSubmit:handlerSubmit,children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsxs)("div",{className:"w-2/3 pr-4",children:[(0,l.jsx)("h1",{className:"text-center text-[400%]",id:"titulos-grandes",children:"Nueva Convocatoria"}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"w-1/3 mx-2",children:(0,l.jsx)("div",{className:"  w-full h-10 mx-5 my-2 flex items-center justify-center text-white ",id:"texto-general",children:"Entrenador encargado:"})}),(0,l.jsx)("select",{onChange:e=>{u(e.target.value)},required:!0,className:"bg-neutral-200 rounded-full w-full h-10 mx-5 my-2 pl-4 text-black",id:"texto-general",placeholder:"Entrenador encargado",children:e.map(e=>(0,l.jsx)("option",{value:e._id,placeholder:"Entrenador encargado",children:e.name+e.lastName+" - "+e.cedula},e._id))})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"w-1/3 mx-2",children:(0,l.jsx)("div",{className:"  w-full h-10 mx-5 my-2 flex items-center justify-center text-white ",id:"texto-general",children:"Fecha del evento"})}),(0,l.jsx)("input",{required:!0,type:"date",onChange:e=>{m(e.target.value),new Date(e.target.value)<new Date?w(!0):w(!1)},className:"bg-neutral-200 rounded-full w-full h-10 mx-5 my-2 pl-4 text-black",id:"texto-general"})]}),b&&(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("p",{className:"text-red-500 mb-2",children:"La fecha no puede ser en un dia pasado"})}),(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"w-1/3 mx-2",children:(0,l.jsx)("div",{className:"  w-full h-10 mx-5 my-2 flex items-center justify-center text-white ",id:"texto-general",children:"Hora inicio"})}),(0,l.jsx)("input",{required:!0,type:"time",onChange:e=>{p(e.target.value)},className:"bg-neutral-200 rounded-full w-full h-10 mx-5 my-2 pl-4 text-black",id:"texto-general",placeholder:"Descripcion general del evento"})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"w-1/3 mx-2",children:(0,l.jsx)("div",{className:"  w-full h-10 mx-5 my-2 flex items-center justify-center text-white ",id:"texto-general",children:"Hora fin"})}),(0,l.jsx)("input",{required:!0,type:"time",onChange:e=>{g(e.target.value)},className:"bg-neutral-200 rounded-full w-full h-10 mx-5 my-2 pl-4 text-black",id:"texto-general",placeholder:"Descripcion general del evento"})]})]}),S&&(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("p",{className:"text-red-500 mb-2",children:"La hora de inicio no puede ser antes que la de fin"})}),(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)("input",{required:!0,placeholder:"Nombre del evento",onChange:e=>{N(e.target.value)},type:"text",className:"bg-neutral-200 rounded-full w-full h-10 mx-5 my-2 pl-4 text-black",id:"texto-general"})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("input",{required:!0,type:"text",onChange:e=>{y(e.target.value)},className:"bg-neutral-200 rounded-full w-full h-20 mx-5 my-2 pl-4 text-black",id:"texto-general",placeholder:"Descripcion general del evento"})})]}),(0,l.jsxs)("div",{className:"w-1/2 pr-4",children:[(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("h1",{className:"text-center text-[400%]",id:"titulos-grandes",children:"Participantes"})}),(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)("select",{onChange:e=>{E(e.target.value)},required:!0,className:"bg-neutral-200 rounded-full w-full h-10 mx-5 my-2 pl-4 text-black",id:"texto-general",placeholder:"Entrenador encargado",children:a.map(e=>(0,l.jsx)("option",{value:e.email,placeholder:"Entrenador encargado",children:e.email},e.email))})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("textarea",{required:!0,value:c,readOnly:!0,className:"bg-neutral-200 h-full w-full h-20 mx-5 my-2 pl-4 text-black",id:"texto-general",placeholder:"Participantes del evento"})}),(0,l.jsxs)("div",{className:"flex justify-center items-center mt-4 ",children:[(0,l.jsx)("button",{type:"button",onClick:()=>handlerSetParticipantes(!0),className:"bg-[#cd1919] text-white rounded p-2 mx-5",children:"Eliminar usuario"}),(0,l.jsx)("button",{type:"button",onClick:()=>handlerSetParticipantes(!1),className:"bg-[#cd1919] text-white rounded p-2",children:"Agregar Usuarios"})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-center items-center mt-4 ",children:[(0,l.jsx)("button",{type:"button",onClick:()=>handlerSubmit(),className:"bg-[#cd1919] text-white rounded p-2 mx-5",children:"Agregar convocatoria"}),(0,l.jsx)("button",{onClick:()=>handlerCancelar(),className:"bg-[#cd1919] text-white rounded p-2",children:"Cancelar"})]})]})})})}},4033:function(e,t,a){e.exports=a(94)}},function(e){e.O(0,[5580,2971,2472,1744],function(){return e(e.s=5174)}),_N_E=e.O()}]);